2025-11-20 13:04:57,996 - __main__ - INFO - ====================================================================================================
2025-11-20 13:04:57,996 - __main__ - INFO - ğŸš€ TEST END-TO-END - ENTRENAMIENTO INICIAL COMPLETO (v1)
2025-11-20 13:04:57,996 - __main__ - INFO - ====================================================================================================
2025-11-20 13:04:57,996 - __main__ - INFO - 
2025-11-20 13:04:57,996 - __main__ - INFO - ğŸ“‹ PASO 1: Creando cuestionario inicial realista...
2025-11-20 13:04:57,996 - __main__ - INFO - âœ… Cuestionario creado:
2025-11-20 13:04:57,996 - __main__ - INFO -    - Cliente: Juan PÃ©rez GarcÃ­a
2025-11-20 13:04:57,996 - __main__ - INFO -    - Edad: 32 aÃ±os
2025-11-20 13:04:57,996 - __main__ - INFO -    - Objetivo: hipertrofia
2025-11-20 13:04:57,996 - __main__ - INFO -    - Nivel: intermedio
2025-11-20 13:04:57,996 - __main__ - INFO -    - Disponibilidad: 4 dÃ­as x 60 min
2025-11-20 13:04:57,996 - __main__ - INFO -    - Lesiones: 1 activa(s)
2025-11-20 13:04:57,996 - __main__ - INFO - 
2025-11-20 13:04:57,996 - __main__ - INFO - ğŸ”§ PASO 2: Inicializando orchestrator...
2025-11-20 13:04:58,514 - edn360.orchestrator - INFO - âœ… Bases de conocimiento cargadas: Training KB (86468 chars), Nutrition KB (83355 chars)
2025-11-20 13:04:58,514 - __main__ - INFO - âœ… Orchestrator inicializado correctamente
2025-11-20 13:04:58,515 - __main__ - INFO -    - KB Training: 86468 caracteres
2025-11-20 13:04:58,515 - __main__ - INFO -    - KB Nutrition: 83355 caracteres
2025-11-20 13:04:58,515 - __main__ - INFO - 
2025-11-20 13:04:58,515 - __main__ - INFO - âš™ï¸ PASO 3: Ejecutando flujo completo E1 â†’ E2 â†’ E3 â†’ E4 â†’ E5 â†’ E6 â†’ E7 â†’ E8 â†’ E9...
2025-11-20 13:04:58,515 - __main__ - INFO -    (Este proceso puede tomar varios minutos)
2025-11-20 13:04:58,515 - __main__ - INFO - 
2025-11-20 13:04:58,515 - edn360.orchestrator - INFO -   ğŸ”§ Inicializando client_context...
2025-11-20 13:04:58,515 - edn360.orchestrator - INFO -   âœ… client_context inicializado: v1, snapshot_id=snapshot_client_juan_perez_e2e_1_f01c8573
2025-11-20 13:04:58,515 - edn360.orchestrator - INFO -   â–¶ï¸ Ejecutando E1 (Analista del Atleta)...
2025-11-20 13:04:58,515 - edn360.agents.base_agent - INFO - ğŸ¤– E1 (Analista del Atleta) - Iniciando ejecuciÃ³n
2025-11-20 13:04:58,515 - edn360.agents.base_agent - INFO - ğŸ“š E1 usando KB de 86468 caracteres
2025-11-20 13:05:27,935 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 13:05:27,943 - edn360.agents.base_agent - INFO - ğŸ“ E1 respuesta (primeros 500 chars): ```json
{
  "client_context": {
    "meta": {
      "client_id": "client_juan_perez_e2e",
      "snapshot_id": "snapshot_client_juan_perez_e2e_1_f01c8573",
      "version": 1,
      "selected_inputs": {
        "cuestionario": "unknown",
        "entrenamiento_base": null
      }
    },
    "raw_inputs": {
      "cuestionario_inicial": "{\n  \"client_id\": \"client_juan_perez_e2e\",\n  \"version\": 1,\n  \"timestamp\": \"2025-11-20T13:04:57.996775\",\n  \"nombre\": \"Juan PÃ©rez GarcÃ­a\",\n  \"ed
2025-11-20 13:05:27,944 - edn360.agents.base_agent - INFO - âœ… E1 completado en 29.43s
2025-11-20 13:05:27,944 - edn360.orchestrator - INFO -   âœ… E1 devolviÃ³ client_context actualizado
2025-11-20 13:05:27,944 - edn360.orchestrator - INFO -     ğŸ” Validando contrato de E1...
2025-11-20 13:05:27,944 - edn360.orchestrator - INFO -   âœ… E1 completado y validado
2025-11-20 13:05:27,944 - edn360.orchestrator - INFO -   â–¶ï¸ Ejecutando E2 (Evaluador de Capacidad y Riesgo)...
2025-11-20 13:05:27,944 - edn360.orchestrator - INFO -     ğŸ” Validando inputs requeridos: ['profile']
2025-11-20 13:05:27,944 - edn360.agents.base_agent - INFO - ğŸ¤– E2 (Evaluador de Capacidad y Riesgo) - Iniciando ejecuciÃ³n
2025-11-20 13:05:27,944 - edn360.agents.base_agent - INFO - ğŸ“š E2 usando KB de 86468 caracteres
2025-11-20 13:05:28,202 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-11-20 13:05:28,203 - openai._base_client - INFO - Retrying request to /chat/completions in 23.412000 seconds
2025-11-20 13:05:51,791 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-11-20 13:05:51,791 - openai._base_client - INFO - Retrying request to /chat/completions in 8.852000 seconds
2025-11-20 13:06:35,046 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 13:06:35,089 - edn360.agents.base_agent - INFO - ğŸ“ E2 respuesta (primeros 500 chars): ```json
{
  "client_context": {
    "meta": {
      "client_id": "client_juan_perez_e2e",
      "snapshot_id": "snapshot_client_juan_perez_e2e_1_f01c8573",
      "version": 1,
      "selected_inputs": {
        "cuestionario": "unknown",
        "entrenamiento_base": null
      }
    },
    "raw_inputs": {
      "cuestionario_inicial": "{\n  \"client_id\": \"client_juan_perez_e2e\",\n  \"version\": 1,\n  \"timestamp\": \"2025-11-20T13:04:57.996775\",\n  \"nombre\": \"Juan PÃ©rez GarcÃ­a\",\n  \"ed
2025-11-20 13:06:35,089 - edn360.agents.base_agent - INFO - âœ… E2 completado en 67.15s
2025-11-20 13:06:35,089 - edn360.orchestrator - INFO -   âœ… E2 devolviÃ³ client_context actualizado
2025-11-20 13:06:35,089 - edn360.orchestrator - INFO -     ğŸ” Validando contrato de E2...
2025-11-20 13:06:35,090 - edn360.orchestrator - INFO -   âœ… E2 completado y validado
2025-11-20 13:06:35,090 - edn360.orchestrator - INFO -   â–¶ï¸ Ejecutando E3 (Analista de Historial y AdaptaciÃ³n)...
2025-11-20 13:06:35,090 - edn360.orchestrator - INFO -     ğŸ” Validando inputs requeridos: ['capacity', 'profile']
2025-11-20 13:06:35,090 - edn360.agents.base_agent - INFO - ğŸ¤– E3 (Analista de Historial y AdaptaciÃ³n) - Iniciando ejecuciÃ³n
2025-11-20 13:06:35,090 - edn360.agents.base_agent - INFO - ğŸ“š E3 usando KB de 86468 caracteres
2025-11-20 13:06:35,273 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-11-20 13:06:35,274 - openai._base_client - INFO - Retrying request to /chat/completions in 21.806000 seconds
2025-11-20 13:06:57,252 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-11-20 13:06:57,252 - openai._base_client - INFO - Retrying request to /chat/completions in 10.282000 seconds
2025-11-20 13:07:35,735 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 13:07:35,767 - edn360.agents.base_agent - INFO - ğŸ“ E3 respuesta (primeros 500 chars): ```json
{
  "client_context": {
    "meta": {
      "client_id": "client_juan_perez_e2e",
      "snapshot_id": "snapshot_client_juan_perez_e2e_1_f01c8573",
      "version": 1,
      "selected_inputs": {
        "cuestionario": "unknown",
        "entrenamiento_base": null
      }
    },
    "raw_inputs": {
      "cuestionario_inicial": "{\n  \"client_id\": \"client_juan_perez_e2e\",\n  \"version\": 1,\n  \"timestamp\": \"2025-11-20T13:04:57.996775\",\n  \"nombre\": \"Juan PÃ©rez GarcÃ­a\",\n  \"ed
2025-11-20 13:07:35,767 - edn360.agents.base_agent - INFO - âœ… E3 completado en 60.68s
2025-11-20 13:07:35,767 - edn360.orchestrator - INFO -   âœ… E3 devolviÃ³ client_context actualizado
2025-11-20 13:07:35,767 - edn360.orchestrator - INFO -     ğŸ” Validando contrato de E3...
2025-11-20 13:07:35,768 - edn360.orchestrator - INFO -   âœ… E3 completado y validado
2025-11-20 13:07:35,768 - edn360.orchestrator - INFO -   â–¶ï¸ Ejecutando E4 (Arquitecto del Mesociclo)...
2025-11-20 13:07:35,768 - edn360.orchestrator - INFO -     ğŸ” Validando inputs requeridos: ['capacity', 'adaptation', 'profile']
2025-11-20 13:07:35,768 - edn360.agents.base_agent - INFO - ğŸ¤– E4 (Arquitecto del Mesociclo) - Iniciando ejecuciÃ³n
2025-11-20 13:07:35,768 - edn360.agents.base_agent - INFO - ğŸ“š E4 usando KB de 86468 caracteres
2025-11-20 13:07:35,936 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-11-20 13:07:35,936 - openai._base_client - INFO - Retrying request to /chat/completions in 39.606000 seconds
2025-11-20 13:09:33,097 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 13:09:33,101 - edn360.agents.base_agent - INFO - ğŸ“ E4 respuesta (primeros 500 chars): ```json
{
  "meta": {
    "client_id": "client_juan_perez_e2e",
    "snapshot_id": "snapshot_client_juan_perez_e2e_1_f01c8573",
    "version": 1,
    "selected_inputs": {
      "cuestionario": "unknown",
      "entrenamiento_base": null
    }
  },
  "raw_inputs": {
    "cuestionario_inicial": "{\n  \"client_id\": \"client_juan_perez_e2e\",\n  \"version\": 1,\n  \"timestamp\": \"2025-11-20T13:04:57.996775\",\n  \"nombre\": \"Juan PÃ©rez GarcÃ­a\",\n  \"edad\": 32,\n  \"sexo\": \"M\",\n  \"peso_actu
2025-11-20 13:09:33,102 - edn360.agents.base_agent - ERROR - âŒ E4 fallÃ³: Error procesando output de E4: Output no contiene client_context
2025-11-20 13:09:33,102 - edn360.orchestrator - ERROR -   âŒ E4 fallÃ³: Error procesando output de E4: Output no contiene client_context
2025-11-20 13:09:33,102 - __main__ - ERROR - âŒ Flujo fallÃ³: E4 fallÃ³: Error procesando output de E4: Output no contiene client_context
2025-11-20 13:09:33,102 - __main__ - ERROR -    Revisa los logs arriba para identificar en quÃ© agente fallÃ³
